{"version":3,"sources":["components/error-indicator/errorImg.png","store.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/book-list/book-list.js","components/shopping-cart-table/shopping-cart-table.js","components/shopping-cart-table/index.js","components/pages/HomePage.js","components/pages/CartPage.js","components/shop-header/shop-header.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/shopping-cart.js","reducers/book-list.js","reducers/index.js","index.js"],"names":["module","exports","timeout","BookListItem","book","onAddedToCart","title","author","price","coverImage","className","src","alt","href","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","bookAddedToCart","bookId","type","payload","fetchBooks","dispatch","getBooks","then","data","catch","err","Spinner","ErrorIndicator","BookImg","BookList","books","map","key","id","BookListContainer","this","loading","error","Component","compose","connect","bookList","bindActionCreators","mapDispatchToProps","onDecrease","onIncrease","onDelete","ShoppingCartTable","shoppingCart","items","cartItems","total","orderTotal","totalSum","reduce","a","b","item","idx","count","HomePage","CartPage","countSum","to","App","role","path","component","exact","ErrorBoundry","state","hasError","info","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","updateCartItems","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","updateShoppingCart","action","undefined","updateBookList","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","render","value","document","querySelector"],"mappings":"sGAAAA,EAAOC,QAAU,IAA0B,sC,wLCuBdC,E,uECrBdC,G,MCCM,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,KAAMC,EAAoB,EAApBA,cACpBC,EAAqCF,EAArCE,MAAOC,EAA8BH,EAA9BG,OAAQC,EAAsBJ,EAAtBI,MAAOC,EAAeL,EAAfK,WAC9B,OACE,yBAAKC,UAAU,kBACb,yBAAKA,UAAU,cACb,yBAAKC,IAAKF,EAAYG,IAAI,WAE5B,yBAAKF,UAAU,gBACb,0BAAMG,KAAK,IAAIH,UAAU,cACtBJ,GAEH,yBAAKI,UAAU,eAAeH,GAC9B,yBAAKG,UAAU,eAAf,IAA+BF,GAC/B,4BAAQM,QAAST,EAAeK,UAAU,4BAA1C,mB,iBCXJK,IAAMC,gBAFEC,E,EAAVC,SACUC,E,EAAVC,SCYaC,EAZc,kBAAM,SAAAC,GACjC,OAAO,SAAAC,GACL,OACE,kBAACJ,EAAD,MACG,SAAAK,GACC,OAAO,kBAACF,EAAD,iBAAaC,EAAb,CAAoBC,iBAAkBA,WCWjDC,EAAkB,SAAAC,GACtB,MAAO,CACLC,KAAM,qBACNC,QAASF,IA0BPG,EAAa,SAAAL,GAAgB,OAAI,kBAAM,SAAAM,GAC3CA,EA1CO,CACLH,KAAM,wBA0CRH,EACGO,WACAC,MAAK,SAAAC,GACJH,EArDG,CACLH,KAAM,sBACNC,QAmDuBK,OAEtBC,OAAM,SAAAC,GAAG,OAAIL,EA1CT,CACLH,KAAM,sBACNC,QAwCkCO,U,OCtDvBC,G,MCCC,WACd,OACE,yBAAK1B,UAAU,uDACb,yBAAKA,UAAU,oBACb,6BACE,6BACE,8BACA,oC,iBCRG2B,ECCQ,WACrB,OACE,yBAAK3B,UAAU,eACb,wBAAIA,UAAU,aAAd,0BACA,oEACA,yBAAKA,UAAU,OAAOC,IAAK2B,IAAS1B,IAAI,2BCGxC2B,EAAW,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,MAAOnC,EAAoB,EAApBA,cACzB,OACE,wBAAIK,UAAU,aACX8B,EAAMC,KAAI,SAAArC,GACT,OACE,wBAAIsC,IAAKtC,EAAKuC,IACZ,kBAAC,EAAD,CACEvC,KAAMA,EACNC,cAAe,kBAAMA,EAAcD,EAAKuC,aAShDC,E,4LAEFC,KAAKtB,MAAMM,e,+BAGH,IAAD,EAC0CgB,KAAKtB,MAA9CiB,EADD,EACCA,MAAOM,EADR,EACQA,QAASC,EADjB,EACiBA,MAAO1C,EADxB,EACwBA,cAE/B,OAAIyC,EACK,kBAAC,EAAD,MAGLC,EACK,kBAAC,EAAD,MAGF,kBAAC,EAAD,CAAUP,MAAOA,EAAOnC,cAAeA,Q,GAhBlB2C,aAkCjBC,cACb5B,IACA6B,aAhBsB,SAAC,GAA6C,IAAD,IAA1CC,SACzB,MAAO,CAAEX,MAD0D,EAA9BA,MACrBM,QADmD,EAAvBA,QACnBC,MAD0C,EAAdA,UAI5B,SAACjB,EAAD,GAAqC,IAAxBN,EAAuB,EAAvBA,iBACtC,OAAO4B,YACL,CACEvB,WAAYA,EAAWL,GACvBnB,cAAeoB,GAEjBK,MAIWmB,CAGbL,GCoBIS,G,MAAqB,CACzBC,WN5D0B,SAAA5B,GAC1B,MAAO,CACLC,KAAM,yBACNC,QAASF,IM0DX6B,WAAY9B,EACZ+B,SNxD8B,SAAA9B,GAC9B,MAAO,CACLC,KAAM,8BACNC,QAASF,MOjCE+B,EDyFAP,aAbS,SAAC,GAAiD,IAAD,IAA9CQ,aACzB,MAAO,CACLC,MAFqE,EAA9BC,UAGvCC,MAHqE,EAAnBC,cAadT,EAAzBH,EAlFW,SAAC,GAMpB,IALLS,EAKI,EALJA,MAEAJ,GAGI,EAJJM,MAII,EAHJN,YACAD,EAEI,EAFJA,WACAE,EACI,EADJA,SAwCMO,EAAWJ,EAAMK,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,EAAEL,QAAO,GAErD,OACE,yBAAKnD,UAAU,uBACb,0CACA,2BAAOA,UAAU,SACf,+BACE,4BACE,iCACA,oCACA,qCACA,qCACA,wCAIJ,+BAAQiD,EAAMlB,KAtDF,SAAC0B,EAAMC,GAAS,IACxBzB,EAA4BwB,EAA5BxB,GAAIrC,EAAwB6D,EAAxB7D,MAAO+D,EAAiBF,EAAjBE,MAAOR,EAAUM,EAAVN,MAC1B,OACE,wBAAInB,IAAKC,GACP,4BAAKyB,EAAM,GACX,4BAAK9D,GACL,4BAAK+D,GACL,gCAAMR,GACN,4BACE,4BACE/C,QAAS,WACP0C,EAASb,IAEXjC,UAAU,6CAEV,uBAAGA,UAAU,mBAEf,4BACEI,QAAS,WACPyC,EAAWZ,IAEbjC,UAAU,8CAEV,uBAAGA,UAAU,uBAEf,4BACEI,QAAS,WACPwC,EAAWX,IAEbjC,UAAU,8CAEV,uBAAGA,UAAU,+BA0BnB,yBAAKA,UAAU,SAAf,WAAgCqD,OE5DvBO,EATE,WACf,OACE,6BACE,kBAAC,EAAD,MACA,kBAAC,EAAD,QCASC,EANE,WACf,OACE,0C,gBC4BWrB,eARS,SAAC,GACvB,MAAO,CACLU,UAFyD,EAAlCF,aAAgBE,aAMhB,GAEZV,EA3BI,SAAC,GAAmB,IAAjBU,EAAgB,EAAhBA,UACdG,EAAWH,EAAUI,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,EAAEL,QAAO,GACnDW,EAAWZ,EAAUI,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,EAAEG,QAAO,GAEzD,OACE,4BAAQ3D,UAAU,mBAChB,kBAAC,IAAD,CAAM+D,GAAG,KACP,yBAAK/D,UAAU,kBAAf,YAEF,kBAAC,IAAD,CAAM+D,GAAG,SACP,yBAAK/D,UAAU,iBACb,uBAAGA,UAAU,kCACZ8D,EAFH,YAEsBT,EAFtB,UCbOW,ECGH,WACV,OACE,0BAAMC,KAAK,OAAOjE,UAAU,aAC1B,kBAAC,EAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOkE,KAAK,IAAIC,UAAWP,EAAUQ,OAAK,IAC1C,kBAAC,IAAD,CAAOF,KAAK,QAAQC,UAAWN,OCTxBQ,E,2MCEbC,MAAQ,CACNC,UAAU,G,iFAEMlC,EAAOmC,GACvBrC,KAAKsC,SAAS,CAAEF,UAAU,M,+BAI1B,OAAIpC,KAAKmC,MAAMC,SACN,kBAAC,EAAD,MAGFpC,KAAKtB,MAAM6D,a,GAbKpC,a,yBCDNqC,E,2MACnBpD,KAAO,CACL,CACEU,GAAI,EACJrC,MAAO,iCACPC,OAAQ,kBACRC,MAAO,GACPC,WACE,4FAEJ,CACEkC,GAAI,EACJrC,MAAO,cACPC,OAAQ,oBACRC,MAAO,GACPC,WACE,6F,wNAIG,IAAI6E,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACTF,EAAQ,EAAKtD,QACZ,S,sGAvBqCe,a,QCFxC0C,EAAkB,SAAC9B,EAAWO,EAAMC,GACxC,OAAmB,IAAfD,EAAKE,MACD,GAAN,mBAAWT,EAAU+B,MAAM,EAAGvB,IAA9B,YAAuCR,EAAU+B,MAAMvB,EAAM,MAGlD,IAATA,EACI,GAAN,mBAAWR,GAAX,CAAsBO,IAElB,GAAN,mBAAWP,EAAU+B,MAAM,EAAGvB,IAA9B,CAAoCD,GAApC,YAA6CP,EAAU+B,MAAMvB,EAAM,MAY/DwB,EAAc,SAACZ,EAAOtD,EAAQmE,GAAc,IAElCrD,EAEVwC,EAFF7B,SAAYX,MACIoB,EACdoB,EADFtB,aAAgBE,UAGZxD,EAAOoC,EAAMsD,MAAK,qBAAGnD,KAAgBjB,KACrCqE,EAAYnC,EAAUoC,WAAU,qBAAGrD,KAAgBjB,KAGnDuE,EApBe,SAAC7F,GAA+B,IAAzB+D,EAAwB,uDAAjB,GAAI0B,EAAa,yCACe1B,EAA3DxB,UAD4C,MACvCvC,EAAKuC,GADkC,IACewB,EAA7CE,aAD8B,MACtB,EADsB,IACeF,EAAlC7D,aADmB,MACXF,EAAKE,MADM,IACe6D,EAAdN,aADD,MACS,EADT,EAGpD,MAAO,CACLlB,KACArC,QACA+D,MAAOA,EAAQwB,EACfhC,MAAOA,EAAQgC,EAAWzF,EAAKI,OAajB0F,CAAe9F,EAFlBwD,EAAUmC,GAEoBF,GAC3C,MAAO,CACL/B,WAAY,EACZF,UAAW8B,EAAgB9B,EAAWqC,EAASF,KA0BpCI,EAtBY,SAACnB,EAAOoB,GACjC,QAAcC,IAAVrB,EACF,MAAO,CACLpB,UAAW,GACXE,WAAY,GAIhB,OAAQsC,EAAOzE,MACb,IAAK,qBACH,OAAOiE,EAAYZ,EAAOoB,EAAOxE,QAAS,GAC5C,IAAK,yBACH,OAAOgE,EAAYZ,EAAOoB,EAAOxE,SAAU,GAC7C,IAAK,8BACH,IAAMuC,EAAOa,EAAMtB,aAAaE,UAAUkC,MACxC,qBAAGnD,KAAgByD,EAAOxE,WAE5B,OAAOgE,EAAYZ,EAAOoB,EAAOxE,SAAUuC,EAAKE,OAClD,QACE,OAAOW,EAAMtB,eCvBJ4C,EAjCQ,SAACtB,EAAOoB,GAC7B,QAAcC,IAAVrB,EACF,MAAO,CACLxC,MAAO,GACPM,SAAS,EACTC,MAAO,MAIX,OAAQqD,EAAOzE,MACb,IAAK,sBACH,MAAO,CACLa,MAAO,GACPM,SAAS,EACTC,MAAO,MAEX,IAAK,sBACH,MAAO,CACLP,MAAO4D,EAAOxE,QACdkB,SAAS,EACTC,MAAO,MAEX,IAAK,sBACH,MAAO,CACLP,MAAO,GACPM,SAAS,EACTC,MAAOqD,EAAOxE,SAElB,QACE,OAAOoD,EAAM7B,WCnBJoD,EAPC,SAACvB,EAAOoB,GACtB,MAAO,CACLjD,SAAUmD,EAAetB,EAAOoB,GAChC1C,aAAcyC,EAAmBnB,EAAOoB,K,QvBYtCI,EAAQC,YACZF,EACAG,YAAgBC,KAZO,kBAAM,SAAAC,GAAI,OAAI,SAAAR,GACrC,OACSQ,EADa,kBAAXR,EACG,CACVzE,KAAMyE,GAIEA,QAXQ,kBAAM,SAAAQ,GAAI,OAAI,SAAAR,GAClC,OAAOQ,EAAKR,SA4BdI,EAAM1E,UAVuB5B,EAUO,IAVI,SAAA4B,GACtC2D,YACE,kBACE3D,EAAS,CACPH,KAAM,qBAEVzB,MAMWsG,QwBzBThF,EAAmB,IAAI6D,EAE7BwB,iBACE,kBAAC,IAAD,CAAUL,MAAOA,GACf,kBAAC,EAAD,KACE,kBAACvF,EAAD,CAA0B6F,MAAOtF,GAC/B,kBAAC,IAAD,KACE,yBAAKd,UAAU,SACb,kBAAC,EAAD,WAMVqG,SAASC,cAAc,Y","file":"static/js/main.29a22f6c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/errorImg.22220253.png\";","import { createStore, applyMiddleware } from 'redux';\nimport reducer from './reducers';\nimport thunkMiddleware from 'redux-thunk';\n\nconst logMiddleware = () => next => action => {\n  return next(action);\n};\n\nconst stringMiddlewate = () => next => action => {\n  if (typeof action === 'string') {\n    return next({\n      type: action\n    });\n  }\n\n  return next(action);\n};\n\nconst store = createStore(\n  reducer,\n  applyMiddleware(thunkMiddleware, stringMiddlewate, logMiddleware)\n);\n\nconst delayedActionCreator = timeout => dispatch => {\n  setTimeout(\n    () =>\n      dispatch({\n        type: 'DELAYED_ACTION'\n      }),\n    timeout\n  );\n};\n\nstore.dispatch(delayedActionCreator(3000));\n\nexport default store;\n","import BookListItem from \"./book-list-item\";\n\nexport default BookListItem;","import React from 'react';\nimport './book-list-item.css';\n\nconst BookListItem = ({ book, onAddedToCart }) => {\n  const { title, author, price, coverImage } = book;\n  return (\n    <div className='book-list-item'>\n      <div className='book-cover'>\n        <img src={coverImage} alt='cover' />\n      </div>\n      <div className='book-details'>\n        <span href='#' className='book-title'>\n          {title}\n        </span>\n        <div className='book-author'>{author}</div>\n        <div className='book-author'>${price}</div>\n        <button onClick={onAddedToCart} className='btn btn-info add-to-cart'>\n          Add to cart\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default BookListItem;\n","import React from 'react';\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer\n} = React.createContext();\n\nexport { BookstoreServiceProvider, BookstoreServiceConsumer };\n\n\n","import React from 'react';\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\n\n\nconst withBookstoreService = () => Wrapped => {\n  return props => {\n    return (\n      <BookstoreServiceConsumer>\n        {bookstoreService => {\n          return <Wrapped {...props} bookstoreService={bookstoreService} />;\n        }}\n      </BookstoreServiceConsumer>\n    );\n  };\n};\n\nexport default withBookstoreService;\n","const booksLoaded = newBooks => {\n  return {\n    type: 'FETCH_BOOKS_SUCCESS',\n    payload: newBooks\n  };\n};\n\nconst booksRequested = () => {\n  return {\n    type: 'FETCH_BOOKS_REQUEST'\n  };\n};\n\nconst booksError = error => {\n  return {\n    type: 'FETCH_BOOKS_FAILURE',\n    payload: error\n  };\n};\n\nconst bookAddedToCart = bookId => {\n  return {\n    type: 'BOOK_ADDED_TO_CART',\n    payload: bookId\n  };\n};\nconst bookRemovedFromCart = bookId => {\n  return {\n    type: 'BOOK_REMOVED_FROM_CART',\n    payload: bookId\n  };\n};\nconst allBooksRemovedFromCart = bookId => {\n  return {\n    type: 'ALL_BOOKS_REMOVED_FROM_CART',\n    payload: bookId\n  };\n};\n\n// const fetchBooksOld = (bookstoreService, dispatch) => () => {\n//   dispatch(booksRequested());\n//   bookstoreService\n//     .getBooks()\n//     .then(data => {\n//       dispatch(booksLoaded(data));\n//     })\n//     .catch(err => dispatch(booksError(err)));\n// };\n\nconst fetchBooks = bookstoreService => () => dispatch => {\n  dispatch(booksRequested());\n  bookstoreService\n    .getBooks()\n    .then(data => {\n      dispatch(booksLoaded(data));\n    })\n    .catch(err => dispatch(booksError(err)));\n};\n\nexport {\n  fetchBooks,\n  bookAddedToCart,\n  bookRemovedFromCart,\n  allBooksRemovedFromCart\n};\n","import Spinner from \"./spinner\";\n\nexport default Spinner;","import React from 'react';\nimport './spinner.css';\n\nconst Spinner = () => {\n  return (\n    <div className='loadingio-spinner-magnify-tgu0irgs9w d-block m-auto'>\n      <div className='ldio-k11tab22jqs'>\n        <div>\n          <div>\n            <div></div>\n            <div></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Spinner;\n","import ErrorIndicator from \"./error-indicator\";\n\nexport default ErrorIndicator;","import React from 'react';\nimport BookImg from './errorImg.png';\n\nconst ErrorIndicator = () => {\n  return (\n    <div className='text-center'>\n      <h1 className='display-3'>All books are gone ...</h1>\n      <h3>But we are already writing new ones!</h3>\n      <img className='w-50' src={BookImg} alt='recover missed books' />\n    </div>\n  );\n};\n\nexport default ErrorIndicator;\n","import React, { Component } from 'react';\nimport BookListItem from '../book-list-item';\nimport './book-list.css';\nimport { connect } from 'react-redux';\nimport { withBookstoreService } from '../hoc';\nimport { fetchBooks, bookAddedToCart } from '../../actions';\nimport { compose } from '../../utils';\nimport Spinner from '../spinner';\nimport ErrorIndicator from '../error-indicator';\nimport { bindActionCreators } from 'redux';\n\nconst BookList = ({ books, onAddedToCart }) => {\n  return (\n    <ul className='book-list'>\n      {books.map(book => {\n        return (\n          <li key={book.id}>\n            <BookListItem\n              book={book}\n              onAddedToCart={() => onAddedToCart(book.id)}\n            />\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nclass BookListContainer extends Component {\n  componentDidMount() {\n    this.props.fetchBooks();\n  }\n\n  render() {\n    const { books, loading, error, onAddedToCart } = this.props;\n\n    if (loading) {\n      return <Spinner />;\n    }\n\n    if (error) {\n      return <ErrorIndicator />;\n    }\n\n    return <BookList books={books} onAddedToCart={onAddedToCart} />;\n  }\n}\n\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\n  return { books, loading, error };\n};\n\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\n  return bindActionCreators(\n    {\n      fetchBooks: fetchBooks(bookstoreService),\n      onAddedToCart: bookAddedToCart \n    },\n    dispatch\n  );\n};\n\nexport default compose(\n  withBookstoreService(),\n  connect(mapStateToProps, mapDispatchToProps)\n)(BookListContainer);\n","import React from 'react';\nimport './shopping-cart-table.css';\nimport { connect } from 'react-redux';\nimport {\n  bookAddedToCart,\n  bookRemovedFromCart,\n  allBooksRemovedFromCart\n} from '../../actions';\n\nconst ShoppingCartTable = ({\n  items,\n  total,\n  onIncrease,\n  onDecrease,\n  onDelete\n}) => {\n  const renderRow = (item, idx) => {\n    const { id, title, count, total } = item;\n    return (\n      <tr key={id}>\n        <td>{idx + 1}</td>\n        <td>{title}</td>\n        <td>{count}</td>\n        <td>${total}</td>\n        <td>\n          <button\n            onClick={() => {\n              onDelete(id);\n            }}\n            className='btn btn-outline-danger btn-sm float-right'\n          >\n            <i className='fa fa-trash-o' />\n          </button>\n          <button\n            onClick={() => {\n              onIncrease(id);\n            }}\n            className='btn btn-outline-success btn-sm float-right'\n          >\n            <i className='fa fa-plus-circle' />\n          </button>\n          <button\n            onClick={() => {\n              onDecrease(id);\n            }}\n            className='btn btn-outline-warning btn-sm float-right'\n          >\n            <i className='fa fa-minus-circle' />\n          </button>\n        </td>\n      </tr>\n    );\n  };\n\n  const totalSum = items.reduce((a, b) => a + b.total, 0);\n\n  return (\n    <div className='shopping-cart-table'>\n      <h2>Your Order</h2>\n      <table className='table'>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Price</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n\n        <tbody>{items.map(renderRow)}</tbody>\n      </table>\n\n      <div className='total'>Total: ${totalSum}</div>\n    </div>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return {\n    items: cartItems,\n    total: orderTotal\n  };\n};\n\nconst mapDispatchToProps = {\n  onDecrease: bookRemovedFromCart,\n  onIncrease: bookAddedToCart,\n  onDelete: allBooksRemovedFromCart\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\n","import ShoppingCartTable from './shopping-cart-table';\n\nexport default ShoppingCartTable;\n","import React from 'react';\nimport BookList from '../book-list/book-list';\nimport ShoppingCartTable from '../shopping-cart-table';\n\nconst HomePage = () => {\n  return (\n    <div>\n      <BookList />\n      <ShoppingCartTable />\n    </div>\n  );\n};\n\nexport default HomePage;\n","import React from 'react';\n\nconst CartPage = () => {\n  return (\n    <h1>Cart Page</h1>\n  );\n}\n\nexport default CartPage;","import React from 'react';\nimport './shop-header.css';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\n\nconst ShopHeader = ({ cartItems }) => {\n  const totalSum = cartItems.reduce((a, b) => a + b.total, 0);\n  const countSum = cartItems.reduce((a, b) => a + b.count, 0);\n\n  return (\n    <header className='shop-header row'>\n      <Link to='/'>\n        <div className='logo text-dark'>ReStore</div>\n      </Link>\n      <Link to='/cart'>\n        <div className='shopping-cart'>\n          <i className='cart-icon fa fa-shopping-cart' />\n          {countSum} items (${totalSum})\n        </div>\n      </Link>\n    </header>\n  );\n};\n\nconst mapStateToProps = ({ shoppingCart: { cartItems } }) => {\n  return {\n    cartItems\n  };\n};\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShopHeader);\n","import App from './app';\n\nexport default App;\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { CartPage, HomePage } from '../pages';\nimport ShopHeader from '../shop-header/shop-header';\n\nconst App = () => {\n  return (\n    <main role='main' className='container'>\n      <ShopHeader/>\n      <Switch>\n        <Route path='/' component={HomePage} exact />\n        <Route path='/cart' component={CartPage} />\n      </Switch>\n    </main>\n  );\n};\n\nexport default App;\n","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;\n","import React, { Component } from 'react';\nimport ErrorIndicator from '../error-indicator';\n\nclass ErrorBoundry extends Component {\n  state = {\n    hasError: false\n  };\n  componentDidCatch(error, info) {\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundry;\n","import { Component } from 'react';\n\nexport default class BookstoreService extends Component {\n  data = [\n    {\n      id: 1,\n      title: 'Production-Ready Microservices',\n      author: 'Susan J. Fowler',\n      price: 32,\n      coverImage:\n        'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'\n    },\n    {\n      id: 2,\n      title: 'Release It!',\n      author: 'Michael T. Nygard',\n      price: 45,\n      coverImage:\n        'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'\n    }\n  ];\n  async getBooks() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        resolve(this.data);\n      }, 700);\n    });\n  }\n}\n","const updateCartItems = (cartItems, item, idx) => {\n  if (item.count === 0) {\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\n  }\n\n  if (idx === -1) {\n    return [...cartItems, item];\n  }\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\n};\nconst updateCartItem = (book, item = {}, quantity) => {\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\n\n  return {\n    id,\n    title,\n    count: count + quantity,\n    total: total + quantity * book.price\n  };\n};\nconst updateOrder = (state, bookId, quantity) => {\n  const {\n    bookList: { books },\n    shoppingCart: { cartItems }\n  } = state;\n\n  const book = books.find(({ id }) => id === bookId);\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\n  const item = cartItems[itemIndex];\n\n  const newItem = updateCartItem(book, item, quantity);\n  return {\n    orderTotal: 0,\n    cartItems: updateCartItems(cartItems, newItem, itemIndex)\n  };\n};\n\nconst updateShoppingCart = (state, action) => {\n  if (state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0\n    };\n  }\n\n  switch (action.type) {\n    case 'BOOK_ADDED_TO_CART':\n      return updateOrder(state, action.payload, 1);\n    case 'BOOK_REMOVED_FROM_CART':\n      return updateOrder(state, action.payload, -1);\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\n      const item = state.shoppingCart.cartItems.find(\n        ({ id }) => id === action.payload\n      );\n      return updateOrder(state, action.payload, -item.count);\n    default:\n      return state.shoppingCart;\n  }\n};\nexport default updateShoppingCart;\n","const updateBookList = (state, action) => {\n  if (state === undefined) {\n    return {\n      books: [],\n      loading: true,\n      error: null\n    };\n  }\n\n  switch (action.type) {\n    case 'FETCH_BOOKS_REQUEST':\n      return {\n        books: [],\n        loading: true,\n        error: null\n      };\n    case 'FETCH_BOOKS_SUCCESS':\n      return {\n        books: action.payload,\n        loading: false,\n        error: null\n      };\n    case 'FETCH_BOOKS_FAILURE':\n      return {\n        books: [],\n        loading: false,\n        error: action.payload\n      };\n    default:\n      return state.bookList;\n  }\n}; \n\nexport default updateBookList;","import updateShoppingCart from './shopping-cart';\nimport updateBookList from './book-list';\n\nconst reducer = (state, action) => {\n  return {\n    bookList: updateBookList(state, action),\n    shoppingCart: updateShoppingCart(state, action)\n  };\n};\n\nexport default reducer;\n","import React from 'react';\nimport { render } from 'react-dom';\nimport App from './components/app';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport ErrorBoundry from './components/error-boundry';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\nimport BookstoreService from './services/bookstore-service';\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nrender(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <div className='Index'>\n            <App />\n          </div>\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.querySelector('#root')\n);\n"],"sourceRoot":""}